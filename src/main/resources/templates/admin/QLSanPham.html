 <main>
        <!-- Danh s√°ch s·∫£n ph·∫©m -->
        <div class="card">
            <table>
                <thead>
                <tr>
                    <th>T√™n</th><th>Lo·∫°i</th><th>Gi√°</th><th>SL</th><th>H√†nh ƒë·ªông</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="sp : ${sanPhamPage.content}">
                    <td th:text="${sp.tenSanPham}"></td>
                    <td th:text="${sp.loai.tenLoai}"></td>
                    <td th:text="${sp.gia}"></td>
                    <td th:text="${sp.soLuong}"></td>
                    <td>
                        <a th:href="@{'/admin/sanpham/edit/' + ${sp.idSanPham}}">S·ª≠a</a> |
                        <a th:href="@{'/admin/sanpham/delete/' + ${sp.idSanPham}}"
                           onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën xo√°?')">Xo√°</a>
                    </td>
                </tr>
                </tbody>
            </table>

            <!-- Ph√¢n trang -->
            <div class="pagination">
                <a th:if="${currentPage > 0}"
                   th:href="@{/admin/sanpham(page=${currentPage - 1}, keyword=${keyword})}">‚Üê Tr∆∞·ªõc</a>
                <span>Trang [[${currentPage + 1}]] / [[${sanPhamPage.totalPages}]]</span>
                <a th:if="${currentPage + 1 < sanPhamPage.totalPages}"
                   th:href="@{/admin/sanpham(page=${currentPage + 1}, keyword=${keyword})}">Sau ‚Üí</a>
            </div>
        </div>

        <!-- FORM TH√äM/S·ª¨A -->
        <div class="form-section" th:if="${sanPham != null}">
            <h3 th:text="${sanPham.idSanPham == null ? 'Th√™m s·∫£n ph·∫©m' : 'C·∫≠p nh·∫≠t s·∫£n ph·∫©m'}"></h3>
            <form th:action="@{/admin/sanpham/save}" method="post" th:object="${sanPham}" enctype="multipart/form-data">
                <input type="hidden" th:field="*{idSanPham}">
                
                <div class="form-group">
                    <label>T√™n:</label>
                    <input type="text" th:field="*{tenSanPham}" required>
                </div>
                <div class="form-group">
                    <label>S·ªë l∆∞·ª£ng:</label>
                    <input type="number" th:field="*{soLuong}" required>
                </div>
                <div class="form-group">
                    <label>Gi√°:</label>
                    <input type="number" th:field="*{gia}" required>
                </div>
                <div class="form-group">
                    <label>Gi·∫£m gi√°:</label>
                    <input type="number" th:field="*{giamgia}">
                </div>
                <div class="form-group">
                    <label>Lo·∫°i:</label>
                    <select th:field="*{loai}">
                        <option value="" disabled selected>-- Ch·ªçn lo·∫°i --</option>
                        <option th:each="loai : ${loais}" th:value="${loai.idLoai}" th:text="${loai.tenLoai}"></option>
                    </select>
                </div>

                <div class="form-group">
                    <label>H√¨nh:</label>
                    <input type="file" name="file" accept="image/*">
                    <div th:if="${sanPham.hinh != null}">
                        <p>·∫¢nh hi·ªán t·∫°i:</p>
                        <img th:src="@{'/images/' + ${sanPham.hinh}}" alt="·∫¢nh s·∫£n ph·∫©m" style="max-height:100px;">
                    </div>
                </div>

                <div class="form-group">
                    <label>M√¥ t·∫£ ng·∫Øn:</label>
                    <textarea th:field="*{motangan}"></textarea>
                </div>
                <div class="form-group">
                    <label>M√¥ t·∫£ chi ti·∫øt:</label>
                    <textarea th:field="*{mota}"></textarea>
                </div>

                <h4>Danh s√°ch m√†u (t·ªëi ƒëa 5 d√≤ng)</h4>
                <div th:each="i : ${#numbers.sequence(0,4)}" class="variant-group">
                    <label>M√†u:</label>
                    <input type="text" name="variantColors" th:value="${variants.size() > i} ? ${variants[i].tenMau} : ''">
                    
                    <label>Gi√° b√°n:</label>
                    <input type="number" name="variantPrices" th:value="${variants.size() > i} ? ${variants[i].giaBan} : ''">
                    
                    <label>S·ªë l∆∞·ª£ng:</label>
                    <input type="number" name="variantQuantities" th:value="${variants.size() > i} ? ${variants[i].soLuong} : ''">

                    <label>·∫¢nh:</label>
                    <input type="file" name="variantFiles" accept="image/*">
                    <div th:if="${variants.size() > i and variants[i].hinhAnh != null}">
                        <img th:src="@{'/images/' + ${variants[i].hinhAnh}}" style="max-height:80px;">
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit">üíæ L∆∞u</button>
                    <a href="/admin/sanpham"><button type="button">Hu·ª∑</button></a>
                </div>
            </form>
        </div>
    </main>
</div>