<div>
  <!-- KPI Cards -->
  <div class="kpi-container">
    <div class="kpi-card bg-gradient-green">
      <div>
        <h3>Tổng doanh thu</h3>
        <p th:text="${#numbers.formatDecimal(tongDoanhThu,0,'COMMA',0,'POINT')} + ' ₫'">0 ₫</p>
      </div>
    </div>
    <div class="kpi-card bg-gradient-blue">
      <div>
        <h3>Tổng đơn hàng</h3>
        <p th:text="${tongDonHang}">0</p>
      </div>
    </div>
    <div class="kpi-card bg-gradient-orange">
      <div>
        <h3>Tổng khách hàng</h3>
        <p th:text="${tongKhachHang}">0</p>
      </div>
    </div>
    <div class="kpi-card" th:classappend="${tongHangSapHet > 0} ? ' bg-gradient-red' : ' bg-gradient-green'">
      <div>
        <h3 th:text="${tongHangSapHet > 0} ? 'Hàng sắp hết' : 'Hàng còn tồn'"></h3>
        <p th:text="${tongHangSapHet > 0} ? 'Có ' + ${tongHangSapHet} + ' sản phẩm cần nhập thêm' : 'Không cần nhập thêm'"></p>
      </div>
    </div>
  </div>

  <!-- Recent Orders -->
  <div class="card">
    <h2>Đơn hàng gần đây</h2>
    <table>
      <thead>
        <tr>
          <th>Mã HĐ</th><th>Ngày lập</th><th>Khách hàng</th><th>Trạng thái</th><th>Tổng tiền</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="hd : ${donHangGanDay}">
          <td th:text="${hd.idHoaDon}">1</td>
          <td th:text="${hd.ngayTao}">2025-08-13</td>
          <td th:text="${hd.user.hoten}">Nguyễn Văn A</td>
          <td th:text="${hd.trangThai}">Đã giao</td>
          <td th:text="${#numbers.formatDecimal(hd.tongTien,0,'COMMA',0,'POINT')} + ' ₫'">1.000.000 ₫</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Chart -->
  <div class="card">
    <h2>Doanh thu 7 ngày gần nhất</h2>
    <div class="chart-container">
      <canvas id="revenueChart"></canvas>
    </div>
  </div>
</div>

<script>
const ctx=document.getElementById('revenueChart').getContext('2d');
new Chart(ctx,{
  type:'line',
  data:{
    labels:['Ngày 1','Ngày 2','Ngày 3','Ngày 4','Ngày 5','Ngày 6','Ngày 7'],
    datasets:[{
      label:'Doanh thu',
      data:[1,2,1.5,3,4,6,5],
      backgroundColor:'rgba(0,123,255,0.2)',
      borderColor:'#007bff',
      borderWidth:2,
      fill:true,
      tension:0.3,
      pointBackgroundColor:'#007bff'
    }]
  },
  options:{
    responsive:true,
    plugins:{legend:{display:false}},
    scales:{y:{beginAtZero:true}}
  }
});
</script>
